{
  "summary": {
    "passed": 8,
    "total": 12,
    "success_rate": "66.7%",
    "timestamp": "2025-10-08T15:32:12.221159"
  },
  "results": [
    {
      "test": "Health Check",
      "success": true,
      "message": "Backend is healthy",
      "timestamp": "2025-10-08T15:32:11.145435",
      "details": {
        "status": "healthy",
        "service": "SmartDoc Pro Backend",
        "version": "1.0.0",
        "timestamp": "2025-10-08T15:32:11.142557"
      }
    },
    {
      "test": "Doctor Login (Demo Account)",
      "success": true,
      "message": "Demo account login successful",
      "timestamp": "2025-10-08T15:32:11.397001",
      "details": {
        "username": "drsmith",
        "token_type": "bearer",
        "user_id": "68dd53f5863240be876f18e5"
      }
    },
    {
      "test": "Patient Save",
      "success": false,
      "message": "HTTP 422",
      "timestamp": "2025-10-08T15:32:11.408709",
      "details": {
        "response": "{\"detail\":[{\"type\":\"string_type\",\"loc\":[\"body\",\"patient_info\",\"age\"],\"msg\":\"Input should be a valid string\",\"input\":45,\"url\":\"https://errors.pydantic.dev/2.4/v/string_type\"},{\"type\":\"string_type\",\"loc\":[\"body\",\"medical_history\",\"allergies\"],\"msg\":\"Input should be a valid string\",\"input\":[\"Penicillin\",\"Shellfish\"],\"url\":\"https://errors.pydantic.dev/2.4/v/string_type\"},{\"type\":\"string_type\",\"loc\":[\"body\",\"medical_history\",\"family_history\"],\"msg\":\"Input should be a valid string\",\"input\":[\"Diabetes (Father)\",\"Heart Disease (Mother)\"],\"url\":\"https://errors.pydantic.dev/2.4/v/string_type\"}]}"
      }
    },
    {
      "test": "Patient Search",
      "success": false,
      "message": "No saved patient code available for search",
      "timestamp": "2025-10-08T15:32:11.408755",
      "details": {}
    },
    {
      "test": "Patient Search Invalid Code",
      "success": false,
      "message": "Expected HTTP 404, got 422",
      "timestamp": "2025-10-08T15:32:11.417762",
      "details": {
        "response": "{\"detail\":[{\"type\":\"string_too_long\",\"loc\":[\"body\",\"patient_code\"],\"msg\":\"String should have at most 8 characters\",\"input\":\"INVALID123\",\"ctx\":{\"max_length\":8},\"url\":\"https://errors.pydantic.dev/2.4/v/string_too_long\"}]}"
      }
    },
    {
      "test": "Get My Patients",
      "success": false,
      "message": "Expected at least 1 patient, got 0",
      "timestamp": "2025-10-08T15:32:11.472069",
      "details": {}
    },
    {
      "test": "Auth Required - GET /patients/my-patients",
      "success": true,
      "message": "Correctly requires authentication (HTTP 403)",
      "timestamp": "2025-10-08T15:32:11.485361",
      "details": {}
    },
    {
      "test": "Auth Required - POST /patients/save",
      "success": true,
      "message": "Correctly requires authentication (HTTP 403)",
      "timestamp": "2025-10-08T15:32:11.540103",
      "details": {}
    },
    {
      "test": "Auth Required - POST /patients/search",
      "success": true,
      "message": "Correctly requires authentication (HTTP 403)",
      "timestamp": "2025-10-08T15:32:11.558399",
      "details": {}
    },
    {
      "test": "EHR Providers",
      "success": true,
      "message": "Retrieved 8 providers",
      "timestamp": "2025-10-08T15:32:11.581554",
      "details": {
        "total_providers": 8,
        "expected_found": 5,
        "providers": [
          "Epic",
          "Cerner",
          "Allscripts",
          "AthenaHealth",
          "eClinicalWorks",
          "NextGen",
          "Custom FHIR",
          "Other"
        ]
      }
    },
    {
      "test": "EHR Configuration (Epic OAuth)",
      "success": true,
      "message": "Epic configuration saved",
      "timestamp": "2025-10-08T15:32:11.689341",
      "details": {
        "success": true,
        "message": "EHR configuration saved successfully",
        "data": {
          "config_id": "2faf52f8-6e6f-4cfb-8007-869dbb653a8a",
          "provider": "Epic"
        }
      }
    },
    {
      "test": "EHR Configuration (Cerner API Key)",
      "success": true,
      "message": "Cerner configuration saved",
      "timestamp": "2025-10-08T15:32:11.715383",
      "details": {
        "success": true,
        "message": "EHR configuration saved successfully",
        "data": {
          "config_id": "11640b22-e708-4902-bfde-3469ce0bec8f",
          "provider": "Cerner"
        }
      }
    },
    {
      "test": "EHR Connection Test",
      "success": true,
      "message": "Connection test completed with status: connected",
      "timestamp": "2025-10-08T15:32:12.080499",
      "details": {
        "success": true,
        "message": "Connection successful",
        "data": {
          "status": "connected",
          "response_time": 0.163321,
          "capabilities": [
            "Claim",
            "Immunization",
            "Observation",
            "ResearchSubject",
            "MedicationDispense",
            "MedicationAdministration",
            "Appointment",
            "Condition",
            "Account",
            "BodyStructure",
            "AllergyIntolerance",
            "DeviceRequest",
            "Practitioner",
            "Communication",
            "List",
            "Provenance",
            "NutritionOrder",
            "Medication",
            "QuestionnaireResponse",
            "Binary",
            "EpisodeOfCare",
            "ImagingStudy",
            "DocumentReference",
            "Substance",
            "DeviceUseStatement",
            "Encounter",
            "ValueSet",
            "MedicationRequest",
            "Contract",
            "Measure",
            "CareTeam",
            "Questionnaire",
            "ImmunizationRecommendation",
            "Endpoint",
            "Organization",
            "ResearchStudy",
            "FamilyMemberHistory",
            "ConceptMap",
            "Group",
            "Media",
            "Coverage",
            "Specimen",
            "PractitionerRole",
            "Task",
            "Procedure",
            "MeasureReport",
            "Device",
            "RelatedPerson",
            "Patient",
            "ExplanationOfBenefit",
            "Location",
            "CarePlan",
            "AdverseEvent",
            "RequestGroup",
            "Consent",
            "DiagnosticReport",
            "Goal",
            "ServiceRequest",
            "Flag"
          ],
          "fhir_version": "4.0.1"
        }
      }
    },
    {
      "test": "Get EHR Configurations",
      "success": true,
      "message": "Retrieved 2 configurations",
      "timestamp": "2025-10-08T15:32:12.093183",
      "details": {
        "count": 2,
        "providers": [
          "Cerner",
          "Epic"
        ]
      }
    },
    {
      "test": "Auth Required - GET /ehr/providers",
      "success": true,
      "message": "Correctly requires authentication (HTTP 403)",
      "timestamp": "2025-10-08T15:32:12.144417",
      "details": {}
    },
    {
      "test": "Auth Required - GET /ehr/configurations",
      "success": true,
      "message": "Correctly requires authentication (HTTP 403)",
      "timestamp": "2025-10-08T15:32:12.157664",
      "details": {}
    },
    {
      "test": "Auth Required - POST /ehr/configure",
      "success": true,
      "message": "Correctly requires authentication (HTTP 403)",
      "timestamp": "2025-10-08T15:32:12.205707",
      "details": {}
    },
    {
      "test": "Auth Required - POST /ehr/test-connection",
      "success": true,
      "message": "Correctly requires authentication (HTTP 403)",
      "timestamp": "2025-10-08T15:32:12.220948",
      "details": {}
    }
  ]
}